<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <title>Document</title>
    <style>
      form {
        width: 60%;
        margin: 2% auto;
      }
      .contact-one__field {
        margin: 0;
      }
      .contact-one__field input,
      .contact-one__field textarea {
        width: 100%;
        display: block;
        border-style: solid;
        border-width: 1px;
        border-color: #e4e4e4;
        border-radius: 4px;
        height: 50px;
        padding-left: 15px;
        margin-bottom: 20px;
      }
      .contact-one__field textarea {
        height: 136px;
        padding-top: 15px;
      }
      .contact-one__field label {
        margin: 0;
        color: #302e2f;
        font-family: "Kumbh Sans", sans-serif;
        font-size: 16px;
      }

      .contact-one__field select {
        width: 100%;
        padding: 10px;
        border-style: solid;
        border-width: 1px;
        border-color: #e4e4e4;
        border-radius: 4px;
        height: 50px;
        margin-bottom: 20px;
        padding-left: 15px;
      }
    </style>
  </head>
  <body>
    <form>
      <div class="row">
        <div class="col-lg-6">
          <p class="contact-one__field">
            <label>Full Name: </label>
            <input type="text" id="fullName" />
          </p>
        </div>
        <div class="col-lg-6">
            <p class="contact-one__field">
              <label>Email Address: </label>
              <input type="email" id="email" />
            </p>
          </div>

        <div class="col-lg-6">
          <p class="contact-one__field">
            <label>Phone Number: </label>
            <input type="number" id="phone" />
          </p>
        </div>
        <div class="col-lg-6">
          <p class="contact-one__field">
            <label>Please, select the date you are booking for: </label>
            <input type="date" id="date" />
          </p>
        </div>
        <div class="col-lg-6">
          <p class="contact-one__field">
            <label>Type of Event: </label>
            <input type="text" id="event" />
          </p>
        </div>
        <div class="col-lg-6">
          <p class="contact-one__field">
            <label
              >Please, input the number of hours you want to book this venue
              for:
            </label>
            <input type="number" id="hours" />
          </p>
        </div>
        <div class="col-lg-6">
          <p class="contact-one__field">
            <label>Lounge Location: </label>
            <select id="location">
              <option selected>Lounge Location</option>
              <option value="lekki">69A, Admiralty Way, Lekki Phase 1</option>
              <option value="surulere">77, Bode Thomas Street, Surulere</option>
              <option value="yaba"
                >271, Herbert Macaulay Way, beside Conoil, Alagomeji Bus Stop,
                Yaba</option
              >
              <option value="ogudu"
                >127, Ogudu Road, opposite Ogudu Mall, Lagos.</option
              >
            </select>
          </p>
        </div>

        <div class="col-lg-12">
          <button type="submit" class="btn btn-primary" id="bookBtn">
            Book Now
          </button>
        </div>
      </div>
    </form>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
      const btn = document.getElementById("bookBtn");
      btn.addEventListener("click", (e) => {
        e.preventDefault();

        let fullName = document.getElementById("fullName").value;
        let email = document.getElementById("email").value
        let phone = document.getElementById("phone").value;
        let date = document.getElementById("date").value;
        let event = document.getElementById("event").value;
        let hours = document.getElementById("hours").value;
        let location = document.getElementById("location").value;

        console.log(fullName, phone, date, event, hours, location);
        if (
          fullName == "" ||
          email == " " ||
          phone == "" ||
          date == "" ||
          event == " " ||
          hours == "" ||
          location == "Lounge Location"
        ) {
          alert("please, fill all fields to continue");
          return;
        }

        const booking_info = {
          fullName,
          email,
          phone,
          event,
          hours,
          bookingDate: date,
          location,
        };

        sendMail(booking_info);
      });

      function sendMail(booking_info) {
        const {
          fullName,
          email,
          phone,
          event,
          hours,
          bookingDate,
          location,
        } = booking_info;

        const options = {
          method: "POST",
          url: "https://email-sender1.p.rapidapi.com/",
          params: {
            txt_msg: `This is to confirm your booking for ${bookingDate}, for our ${hours} hours, below are your booking details - ${booking_info}`,
            to: `${email}`,
            from: "BukkaHutBookings",
            subject: "Booking Confirmation",
            bcc: "info@bukkahut.com ",
            reply_to: "info@bukkahut.com ",
            html_msg: `<html><body><b>Dear ${fullName}</b>, <br/> <br/>This is to confirm that you have successfully booked our ${location} lounge for ${bookingDate}, you booked this venue for ${hours} hours, below are your booking details - <ul><li>Name - ${fullName}</li> <li>Phone Number - ${phone} </li> <li>Event - ${event}</li> <li>Number of Hours - ${hours}</li><li>Location - ${location}</li></ul> <br/>  Best Regards <br/> <br/><b>Bukka Hut </b> <br/> <p> For Enquires or complaints, kindly call us on 0700 055 0055 or send us an email via Info@bukkahut.com </p></body></html>`,
          },
          headers: {
            "content-type": "application/json",
            "x-rapidapi-host": "email-sender1.p.rapidapi.com",
            "x-rapidapi-key":
              "041695ddc2msh03ecff701bdb863p15a99ejsnfcf96e24fbff",
          },
          data: { key1: "value", key2: "value" },
        };

        axios
          .request(options)
          .then(function (response) {
            console.log(response.data);
            document.getElementById("fullName").value = "";
            document.getElementById("phone").value = "";
            document.getElementById("date").value = "";
            document.getElementById("event").value = "";
            document.getElementById("hours").value = "";
          })
          .catch(function (error) {
            console.error(error);
          });
      }
    </script>
  </body>
</html>
